#!/usr/bin/env nu

use ~/dot/nu/niri.nu *

const $CLASS = "modal"
const $CONFIG = ("~/.config/kitty/modal.conf" | path expand)

# Run a command inside of a modal terminal window
def main [$cmd, ...$args] {
    let $w = (wm window-with-app-id $CLASS)
    if ($w | is-empty) {
        wm spawn kitty --config $CONFIG --class $CLASS -- $cmd ...$args
    } else {
        wm close-window $w.id
    }
}
