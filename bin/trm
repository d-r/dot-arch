#!/usr/bin/env nu

use ~/dot/nu/niri.nu *

# Spawn a terminal and optionally run a shell command inside of it
def main [...$cmd: string, --config:string, --app-id:string] {
    let $config = ($config | default kitty) ++ ".conf"
    let $config = ("~/.config/kitty" | path expand | path join $config)
    let $app_id = ($app_id | default kitty)
    wm spawn kitty --config $config --app-id $app_id -d (cwd) -- ...$cmd
}

# Get the working directory for the focused workspace
def cwd [] {
    match (wm focused-workspace).name {
        "web" => "~/dl"
        "dot" => "~/dot"
        "dev" => "~/src/eeva"
        "vlt" => "~/vault"
        "snd" => "~/.local/share/Renoise/User Library"
        _ => "~"
    }
    | path expand
}
