#!/usr/bin/env nu

use ~/dot/nu/all.nu *

const $QB_ID = "org.qutebrowser.qutebrowser"
const $BITWIG_ID = "com.bitwig.BitwigStudio"

# Uh...
def main [] {
    help main
}

# Run a program
def "main run" [] {
    tui run
}

# Spawn a browser
def "main browser" [] {
    wm spawn-or-focus-in-ws $QB_ID qb (wm ws-name)
}

# Spawn a file manager
def "main file-manager" [] {
    cli yazi
}

# Spawn a DAW
def "main daw" [] {
    wm spawn-or-focus $BITWIG_ID flatpak run $BITWIG_ID
}

# Spawn a terminal
def "main term" [] {
    wm spawn kitty -d (wm cwd) --class term
}

# Toggle console
def "main console" [] {
    let $name = (wm ws-name)
    let $id = $"console.($name)"
    wm toggle $id kitty -d (wm cwd) --app-id $id -- tmux new -A -s $"c_($name)"
}

# Toggle music player
def "main music" [] {
    cli --toggle music
}

# Visit a bookmarked URL
def "main visit" [] {
    tui visit
}

# Bookmark the URL inside of the clipboard, if there is one
def "main bookmark" [] {
    let $s = (wl-paste)
    if ($s | is-url) {
        tui bookmark $s
    }
}

# Edit a project
def "main edit" [] {
    tui edit
}
